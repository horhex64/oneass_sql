# Скрипты SQL для прямого доступа к базе 1С:Предприятие

Прямой доступ нарушает лицензию 1С!  Автор не несет ответственности за работу скриптов.

## delete organization
Скрипт очищает все ссылки на объект в базе 1С (по организации). Используется для разделения базы в которой ведется учёт по нескольким организациям. 

Для запуска потребуются:
1. Инструменты разработчика. Необходимо определить ID организации (ссылка) для последующего удаления.
   ![Image alt](https://github.com/horhex64/oneass_sql/raw/main/imag/ir_structure_db.jpg)

   В данном случае _Reference141 - таблица где храняться имена организаций и их ID
   
   ```sql
   insert into #Links (rfs_id) select _IDRRef from _Reference141 where _IDRRef <> 0xA12800155D04D31011ECF1EFD5CA0246
   ```
   _IDRRef <> 0xA12800155D04D31011ECF1EFD5CA0246 - id организации, которую нужно оставить, остальные будут удалены
   
   
3. Перед запуском необходимо остановить регламентные задания.
4. Заменить ссылки в скрипте на ID нужной организации.

## Исзменения v 3
1. Добавлен цыкл для очистки всех организаций, кроме указанной
2. Добавлен подсчет процента выполнения
3. Добавлен код для SQL Server 2008 в часте очистки временных таблиц
4. Добавлены переменные для удобства работы
